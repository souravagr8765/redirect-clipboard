<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script>
      const local = "https:clipboard.srvagr-local.duckdns.org";
      const tailscale = "https:clipboard.srvagr.duckdns.org";


      function check(url, callback) {
        const img = new Image();
        img.onload = () => callback(true);
        img.onerror = () => callback(false);
        img.src = url + "/favicon.ico?" + Date.now();
      }

      function redirectTo(target) {
        const a = document.createElement('a');
        a.href = target;
        a.style.display = 'none';
        document.body.appendChild(a);
        a.click(); // triggers in-app navigation
      }

      window.onload = () => {
        check(local, (isUp) => {
          redirectTo(isUp ? local : tailscale);
        });
      };
    </script>
  </head>
  <body>
    <p>Checking connection...</p>
  </body>
</html>
